<!DOCTYPE html>
<html>
<head>
    <title>Introduction to Statistics and Data Collection</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container" id="container">
        <button class="toggle-button" id="toggleButton">Open Calculator</button>

        <!-- Sidebar placeholder -->
        <div id="sidebar-container"></div>

        <div class="right-panel">
            <h1>Introduction to Statistics and Data Collection</h1>
            <h2>Foundations of Statistical Analysis</h2>

            <!-- Tabs -->
            <div class="tab">
                <button class="tablinks active" onclick="openTab(event, 'Theory')">Theory</button>
                <button class="tablinks" onclick="openTab(event, 'Examples')">Examples</button>
            </div>

            <div id="Theory" class="tabcontent active">
                <h3>Theory</h3>
                <!-- Theory content... -->
            </div>

            <div id="Examples" class="tabcontent">
                <h3>Examples</h3>
                <!-- Examples content... -->
            </div>
        </div>
    </div>

    <footer>
        <p>Statistics Education Resource - April 2025</p>
    </footer>

    <!-- Load sidebar and make everything work -->
    <script>
    function openTab(evt, tabName) {
        const tabcontent = document.getElementsByClassName('tabcontent');
        for (let i = 0; i < tabcontent.length; i++) {
            tabcontent[i].classList.remove('active');
        }
        const tablinks = document.getElementsByClassName('tablinks');
        for (let i = 0; i < tablinks.length; i++) {
            tablinks[i].classList.remove('active');
        }
        document.getElementById(tabName).classList.add('active');
        evt.currentTarget.classList.add('active');
    }

    // Load sidebar.html
    fetch('sidebar.html')
        .then(response => response.text())
        .then(html => {
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');

            // Inject sidebar HTML
            document.getElementById('sidebar-container').innerHTML = doc.body.innerHTML;

            // Manually inject and execute <script> tags
            doc.querySelectorAll('script').forEach(oldScript => {
                const newScript = document.createElement('script');
                if (oldScript.src) {
                    newScript.src = oldScript.src;
                    newScript.async = oldScript.async;
                    newScript.onload = () => {
                        // Re-initialize the NumWorks calculator
                        if (typeof window.NWS !== 'undefined') {
                            window.NWS.init();
                        }
                    };
                } else {
                    newScript.textContent = oldScript.textContent;
                }
                document.body.appendChild(newScript);
            });

            // Attach toggle button after sidebar is added
            document.getElementById('toggleButton').addEventListener('click', () => {
                const leftPanel = document.getElementById('leftPanel');
                const container = document.getElementById('container');
                const isMinimized = leftPanel.classList.toggle('minimized');
                container.classList.toggle('minimized', isMinimized);
                document.getElementById('toggleButton').textContent = isMinimized ? 'Open Calculator' : 'Close Calculator';
            });
        });
</script>
</body>
</html>
