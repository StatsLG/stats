<!DOCTYPE html>
<html>
<head>
  <title>Introduction to Sampling</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <style>
    .city-section {
      border: 1px solid #ccc;
      padding: 15px;
      margin-top: 20px;
      border-radius: 8px;
    }
    .city-section input,
    .city-section button {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      font-size: 1em;
    }
    .output {
      margin-top: 15px;
      background: #f8f8f8;
      padding: 10px;
      border: 1px solid #ccc;
    }
    .tabcontent {
      display: none;
    }
    .tabcontent.active {
      display: block;
    }
    .tab button.active {
      background-color: #ccc;
    }
    .toggle { display: none; }
    .question {
      display: block;
      background: #eee;
      padding: 8px;
      cursor: pointer;
      margin-top: 10px;
      border-radius: 4px;
    }
    .toggle:checked + .question + .answer {
      display: block;
    }
    .answer {
      display: none;
      margin-top: 10px;
      background: #f9f9f9;
      padding: 10px;
      border-left: 3px solid #ccc;
    }
  </style>
</head>
<body>
  <div class="container" id="container">
    <button class="toggle-button" id="toggleButton">Open Calculator</button>
    <div class="left-panel" id="leftPanel">
      <button class="minimize-button calculator-button" onclick="toggleLeftPanel()">Minimize</button>
      <a class="nws-simulator-embed calculator-button"
         data-nws-src="https://www.numworks.com/simulator/embed/#sid=122zbam"
         data-nws-width="368px" data-nws-height="720px">Open Calculator</a>
      <button class="font-button increase-font" onclick="changeFontSize('increase')">Increase Font</button>
      <button class="font-button decrease-font" onclick="changeFontSize('decrease')">Decrease Font</button>
      <script src="https://www.numworks.com/simulator/embed.js"></script>
    </div>

    <div class="right-panel">
      <h1>Introduction to Sampling</h1>
      <h2>Principles of Representative Sampling</h2>

      <div class="tab">
        <button class="tablinks active" onclick="openTab(event, 'Theory')">Theory</button>
        <button class="tablinks" onclick="openTab(event, 'Examples')">Examples</button>
        <button class="tablinks" onclick="openTab(event, 'Lab')">Lab</button>
      </div>

      <div id="Theory" class="tabcontent active">
        <h3>I. Introduction and Data Collection</h3>
        <h4>B. Sampling</h4>
        <p>In this section:</p>
        <ul>
          <li>Bias</li>
          <li>Random Sampling</li>
          <li>Sampling Error</li>
        </ul>
        <p>[Full theory content goes here based on your pasted section. It has been truncated for clarity in this preview.]</p>
      </div>

      <div id="Examples" class="tabcontent">
        <h3>Examples</h3>
        <p>[Your detailed examples from the original Theory section have been moved here. This includes restaurant comment cards, medical volunteers, Lexington income, student rows, surgeon satisfaction, inmate sampling, NYC school clusters, and margin of error questions.]</p>
      </div>

      <div id="Lab" class="tabcontent">
        <h3>Sampling Simulation Lab</h3>
        <p>Sample dog breeds from different cities. Each has a different mix of breeds. Try to detect differences!</p>
        <div id="lab-container"></div>
      </div>
    </div>
  </div>

  <footer>
    <p>Statistics Education Resource - April 2025</p>
  </footer>

  <script>
    function toggleLeftPanel() {
      const leftPanel = document.getElementById('leftPanel');
      const container = document.getElementById('container');
      const toggleButton = document.getElementById('toggleButton');
      const isMinimized = leftPanel.classList.toggle('minimized');
      container.classList.toggle('minimized', isMinimized);
      toggleButton.textContent = isMinimized ? 'Open Calculator' : 'Close Calculator';
    }

    function changeFontSize(action) {
      const rightPanel = document.querySelector('.right-panel');
      let size = parseFloat(getComputedStyle(rightPanel).fontSize);
      size += (action === 'increase') ? 2 : -2;
      size = Math.min(Math.max(size, 12), 24);
      rightPanel.style.fontSize = `${size}px`;
    }

    function openTab(evt, tabName) {
      const tabcontent = document.getElementsByClassName('tabcontent');
      for (let i = 0; i < tabcontent.length; i++) {
        tabcontent[i].classList.remove('active');
      }
      const tablinks = document.getElementsByClassName('tablinks');
      for (let i = 0; i < tablinks.length; i++) {
        tablinks[i].classList.remove('active');
      }
      document.getElementById(tabName).classList.add('active');
      evt.currentTarget.classList.add('active');
    }

    const cityProbabilities = {
      'A': 0.8,
      'B': 0.5,
      'C': 0.65
    };

    const cityInfo = {
      'A': { title: 'üèôÔ∏è City A', inputId: 'sampleCountA', outputId: 'outputA' },
      'B': { title: 'üèôÔ∏è City B', inputId: 'sampleCountB', outputId: 'outputB' },
      'C': { title: 'üåé Both Cities Combined', inputId: 'sampleCountC', outputId: 'outputC' }
    };

    const cities = ['A', 'B', 'C'];
    for (let i = cities.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [cities[i], cities[j]] = [cities[j], cities[i]];
    }

    const labContainer = document.getElementById("lab-container");
    cities.forEach(city => {
      const section = document.createElement("div");
      section.className = "city-section";
      section.innerHTML = `
        <h2>${cityInfo[city].title}</h2>
        <label>Number of dogs to sample:</label>
        <input type="number" id="${cityInfo[city].inputId}" min="1" placeholder="e.g. 10" />
        <button onclick="sampleDogs('${city}')">Sample from ${cityInfo[city].title}</button>
        <div id="${cityInfo[city].outputId}" class="output"></div>
      `;
      labContainer.appendChild(section);
    });

    function sampleDogs(city) {
      const inputId = cityInfo[city].inputId;
      const outputId = cityInfo[city].outputId;
      const sampleCount = parseInt(document.getElementById(inputId).value);
      const outputDiv = document.getElementById(outputId);
      const labProbability = cityProbabilities[city];

      if (isNaN(sampleCount) || sampleCount < 1) {
        outputDiv.innerHTML = "Please enter a valid number of dogs to sample.";
        return;
      }

      const sample = [];
      let labCount = 0;
      for (let i = 0; i < sampleCount; i++) {
        const isLab = Math.random() < labProbability;
        const dog = isLab ? "Labrador Retriever" : "Pomeranian";
        sample.push(dog);
        if (isLab) labCount++;
      }

      const pomCount = sampleCount - labCount;
      outputDiv.innerHTML = `
        <strong>Sampled ${sampleCount} Dogs:</strong><br>
        üêï Labrador Retrievers: ${labCount}<br>
        üê∂ Pomeranians: ${pomCount}<br><br>
        <em>Sample Details:</em><br>
        ${sample.join("<br>")}
      `;
    }

    document.getElementById('toggleButton').addEventListener('click', toggleLeftPanel);
  </script>
</body>
</html>
