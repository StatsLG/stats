<!DOCTYPE html>
<html>
<head>
  <title>Introduction to Sampling</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <style>
    .city-section {
      border: 1px solid #ccc;
      padding: 15px;
      margin-top: 20px;
      border-radius: 8px;
    }
    .city-section input,
    .city-section button {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      font-size: 1em;
    }
    .output {
      margin-top: 15px;
      background: #f8f8f8;
      padding: 10px;
      border: 1px solid #ccc;
    }
    .tabcontent {
      display: none;
    }
    .tabcontent.active {
      display: block;
    }
    .tab button.active {
      background-color: #ccc;
    }
    .toggle { display: none; }
    .question {
      display: block;
      background: #eee;
      padding: 8px;
      cursor: pointer;
      margin-top: 10px;
      border-radius: 4px;
    }
    .toggle:checked + .question + .answer {
      display: block;
    }
    .answer {
      display: none;
      margin-top: 10px;
      background: #f9f9f9;
      padding: 10px;
      border-left: 3px solid #ccc;
    }
  </style>
</head>
<body>
  <div class="container" id="container">
    <button class="toggle-button" id="toggleButton">Open Calculator</button>
    <div class="left-panel" id="leftPanel">
      <button class="minimize-button calculator-button" onclick="toggleLeftPanel()">Minimize</button>
      <a class="nws-simulator-embed calculator-button"
         data-nws-src="https://www.numworks.com/simulator/embed/#sid=122zbam"
         data-nws-width="368px" data-nws-height="720px">Open Calculator</a>
      <button class="font-button increase-font" onclick="changeFontSize('increase')">Increase Font</button>
      <button class="font-button decrease-font" onclick="changeFontSize('decrease')">Decrease Font</button>
      <script src="https://www.numworks.com/simulator/embed.js"></script>
    </div>

    <div class="right-panel">
      <h1>Introduction to Sampling</h1>
      <h2>Principles of Representative Sampling</h2>

      <div class="tab">
        <button class="tablinks active" onclick="openTab(event, 'Theory')">Theory</button>
        <button class="tablinks" onclick="openTab(event, 'Examples')">Examples</button>
        <button class="tablinks" onclick="openTab(event, 'Lab')">Lab</button>
      </div>

      <div id="Theory" class="tabcontent active">
        <h3>Theory</h3>
        <h4>Bias</h4>
        <p><strong>Bias</strong> occurs when a sample is selected in a way that favors certain characteristics...</p>
        <ul>
          <li><strong>Convenience Sampling</strong>: Uses readily available data...</li>
          <li><strong>Voluntary Response Sampling</strong>: Often over-represents those with strong opinions...</li>
        </ul>

        <h4>Random Sampling</h4>
        <p><strong>Simple Random Sample</strong>: Every possible sample of size \(n\) has an equal chance of being selected.</p>
        <ul>
          <li><strong>Stratified Sampling</strong>: Divides the population into strata...</li>
          <li><strong>Systematic Sampling</strong>: Selects every \(k\)-th individual...</li>
          <li><strong>Cluster Sampling</strong>: Divides the population into clusters...</li>
        </ul>

        <h4>Sampling Error</h4>
        <ul>
          <li><strong>Sampling Variability</strong>: The extent to which a statistic varies...</li>
          <li><strong>Margin of Error</strong>: For proportions: \( \frac{1}{\sqrt{n}} \)</li>
          <li><strong>Under-coverage</strong>: When some groups are excluded...</li>
        </ul>
      </div>

      <div id="Examples" class="tabcontent">
        <h3>Examples</h3>

        <section>
          <h4>Example 1: Identifying Bias</h4>
          <p>Determine whether each sampling method introduces bias:</p>
          <ol>
            <li>Restaurant comment cards are used to assess service quality.</li>
            <li>A new cancer treatment is tested on volunteers with severe cases.</li>
          </ol>
          <input type="checkbox" id="ex1" class="toggle">
          <label for="ex1" class="question">Click Here For Answer</label>
          <div class="answer">
            <p><strong>1.</strong> Biased ‚Äî Voluntary response over-represents strong opinions.</p>
            <p><strong>2.</strong> Biased ‚Äî Volunteers with severe cases are not representative.</p>
          </div>
        </section>

        <section>
          <h4>Example 2: Random Sampling</h4>
          <p>You select 1000 males from Lexington to estimate Kentucky income...</p>
          <input type="checkbox" id="ex2" class="toggle">
          <label for="ex2" class="question">Click Here For Answer</label>
          <div class="answer">
            <p>Not a simple random sample. Over-represents males and Lexington residents...</p>
          </div>
        </section>

        <section>
          <h4>Example 3: Types of Random Sampling</h4>
          <p>Identify the type of sampling in each scenario:</p>
          <ol>
            <li>Choosing one row of a classroom</li>
            <li>Dividing surgeons by gender and sampling each</li>
            <li>Every 7th inmate from a list</li>
            <li>Randomly selecting schools and surveying all students</li>
          </ol>
          <input type="checkbox" id="ex3" class="toggle">
          <label for="ex3" class="question">Click Here For Answer</label>
          <div class="answer">
            <p>1. Cluster | 2. Stratified | 3. Systematic | 4. Cluster</p>
          </div>
        </section>

        <section>
          <h4>Example 4: Sampling Error</h4>
          <p>1600 adults sampled, 800 enjoy amusement parks:</p>
          <ol>
            <li>Sample proportion?</li>
            <li>Margin of error?</li>
            <li>95% confidence interval?</li>
          </ol>
          <input type="checkbox" id="ex4" class="toggle">
          <label for="ex4" class="question">Click Here For Answer</label>
          <div class="answer">
            <p>1. 0.5 | 2. 0.025 | 3. (0.475, 0.525)</p>
          </div>
        </section>
      </div>

      <div id="Lab" class="tabcontent">
        <h3>Sampling Simulation Lab</h3>
        <p>Sample dog breeds from different cities. Each has a different mix of breeds. Try to detect differences!</p>
        <div id="lab-container"></div>
      </div>
    </div>
  </div>

  <footer>
    <p>Statistics Education Resource - April 2025</p>
  </footer>

  <script>
    function toggleLeftPanel() {
      const leftPanel = document.getElementById('leftPanel');
      const container = document.getElementById('container');
      const toggleButton = document.getElementById('toggleButton');
      const isMinimized = leftPanel.classList.toggle('minimized');
      container.classList.toggle('minimized', isMinimized);
      toggleButton.textContent = isMinimized ? 'Open Calculator' : 'Close Calculator';
    }

    function changeFontSize(action) {
      const rightPanel = document.querySelector('.right-panel');
      let size = parseFloat(getComputedStyle(rightPanel).fontSize);
      size += (action === 'increase') ? 2 : -2;
      size = Math.min(Math.max(size, 12), 24);
      rightPanel.style.fontSize = `${size}px`;
    }

    function openTab(evt, tabName) {
      const tabcontent = document.getElementsByClassName('tabcontent');
      for (let i = 0; i < tabcontent.length; i++) {
        tabcontent[i].classList.remove('active');
      }
      const tablinks = document.getElementsByClassName('tablinks');
      for (let i = 0; i < tablinks.length; i++) {
        tablinks[i].classList.remove('active');
      }
      document.getElementById(tabName).classList.add('active');
      evt.currentTarget.classList.add('active');
    }

    // Lab tab app
    const cityProbabilities = {
      'A': 0.8,
      'B': 0.5,
      'C': 0.65
    };

    const cityInfo = {
      'A': { title: 'üèôÔ∏è City A', inputId: 'sampleCountA', outputId: 'outputA' },
      'B': { title: 'üèôÔ∏è City B', inputId: 'sampleCountB', outputId: 'outputB' },
      'C': { title: 'üåé Both Cities Combined', inputId: 'sampleCountC', outputId: 'outputC' }
    };

    const cities = ['A', 'B', 'C'];
    for (let i = cities.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [cities[i], cities[j]] = [cities[j], cities[i]];
    }

    const labContainer = document.getElementById("lab-container");
    cities.forEach(city => {
      const section = document.createElement("div");
      section.className = "city-section";
      section.innerHTML = `
        <h2>${cityInfo[city].title}</h2>
        <label>Number of dogs to sample:</label>
        <input type="number" id="${cityInfo[city].inputId}" min="1" placeholder="e.g. 10" />
        <button onclick="sampleDogs('${city}')">Sample from ${cityInfo[city].title}</button>
        <div id="${cityInfo[city].outputId}" class="output"></div>
      `;
      labContainer.appendChild(section);
    });

    function sampleDogs(city) {
      const inputId = cityInfo[city].inputId;
      const outputId = cityInfo[city].outputId;
      const sampleCount = parseInt(document.getElementById(inputId).value);
      const outputDiv = document.getElementById(outputId);
      const labProbability = cityProbabilities[city];

      if (isNaN(sampleCount) || sampleCount < 1) {
        outputDiv.innerHTML = "Please enter a valid number of dogs to sample.";
        return;
      }

      const sample = [];
      let labCount = 0;
      for (let i = 0; i < sampleCount; i++) {
        const isLab = Math.random() < labProbability;
        const dog = isLab ? "Labrador Retriever" : "Pomeranian";
        sample.push(dog);
        if (isLab) labCount++;
      }

      const pomCount = sampleCount - labCount;
      outputDiv.innerHTML = `
        <strong>Sampled ${sampleCount} Dogs:</strong><br>
        üêï Labrador Retrievers: ${labCount}<br>
        üê∂ Pomeranians: ${pomCount}<br><br>
        <em>Sample Details:</em><br>
        ${sample.join("<br>")}
      `;
    }

    document.getElementById('toggleButton').addEventListener('click', toggleLeftPanel);
  </script>
</body>
</html>
