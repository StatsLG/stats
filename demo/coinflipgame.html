<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Rigged Coin Flip — StatsLG</title>
<link rel="stylesheet" href="/style/bctcstyle.css">
<style>
  body {margin:0;font-family:system-ui,sans-serif;background:#f8f8f8;}
  main {display:flex;justify-content:center;align-items:center;min-height:100vh;}
  .card{background:white;padding:2rem;border-radius:10px;box-shadow:0 6px 16px rgba(0,0,0,.15);text-align:center;max-width:500px;}
  .scene{perspective:1000px;margin:1.5rem auto;}
  .coin{
    width:150px;height:150px;margin:auto;position:relative;
    transform-style:preserve-3d;transition:transform 1s ease-in-out;
  }
  .side{
    position:absolute;width:100%;height:100%;border-radius:50%;
    display:flex;align-items:center;justify-content:center;
    font-size:64px;font-weight:bold;backface-visibility:hidden;
    background:radial-gradient(circle at 30% 30%,#fdfdfd,#ccc);
    box-shadow:0 6px 12px rgba(0,0,0,.3);
  }
  .tails{transform:rotateY(180deg);background:radial-gradient(circle at 70% 30%,#fff,#bbb);}
  button{margin:.3rem;padding:.5rem 1rem;font-size:16px;border:none;border-radius:6px;background:#00467f;color:#fff;cursor:pointer;}
  button:hover{background:#005da8;}
  .scoreboard{display:flex;justify-content:center;gap:2rem;margin-top:1rem;}
  .score h3{margin:.2rem;font-size:15px;color:#555;}
  .score p{font-size:30px;font-weight:bold;margin:0;}
  .history{margin-top:1rem;font-family:monospace;max-height:150px;overflow:auto;border-top:1px dashed #ccc;padding-top:.5rem;text-align:left;font-size:14px;color:#333;}
</style>
</head>
<body>
<main>
  <div class="card">
    <h1>Rigged Coin Flip</h1>
    <p style="color:#666">Heads = House (H) • Tails = Player (T)</p>

    <div class="scene">
      <div class="coin" id="coin">
        <div class="side heads">H</div>
        <div class="side tails">T</div>
      </div>
    </div>

    <div>
      <button id="flipBtn">Flip</button>
      <button id="flip10Btn">Flip 10</button>
      <button id="resetBtn">Reset</button>
    </div>

    <div class="scoreboard">
      <div class="score"><h3>House</h3><p id="houseScore">0</p></div>
      <div class="score"><h3>Player</h3><p id="playerScore">0</p></div>
    </div>

    <div class="history" id="log"></div>
  </div>
</main>

<script>
const HEADS_PROB = 0.75; // 75% chance for Heads (House)
let house=0, player=0;
const coin=document.getElementById('coin');
const log=document.getElementById('log');
const houseEl=document.getElementById('houseScore');
const playerEl=document.getElementById('playerScore');

function riggedFlip(){return Math.random()<HEADS_PROB?'heads':'tails';}

async function flipOnce(){
  const result=riggedFlip();
  // random spins 3–10
  const spins=Math.floor(Math.random()*8)+3;
  const extra=result==='heads'?0:180;
  const duration=(Math.random()*0.7+0.8).toFixed(2); // 0.8–1.5s
  coin.style.transition=`transform ${duration}s cubic-bezier(.45,1.8,.45,.95)`;
  coin.style.transform=`rotateY(${360*spins+extra}deg)`;
  await new Promise(r=>setTimeout(r,duration*1000));
  if(result==='heads'){house++;houseEl.textContent=house;log.innerHTML=`H → House +1<br>`+log.innerHTML;}
  else{player++;playerEl.textContent=player;log.innerHTML=`T → Player +1<br>`+log.innerHTML;}
}

async function flipMany(n){
  for(let i=0;i<n;i++){await flipOnce();await new Promise(r=>setTimeout(r,300));}
}

document.getElementById('flipBtn').onclick=()=>flipOnce();
document.getElementById('flip10Btn').onclick=()=>flipMany(10);
document.getElementById('resetBtn').onclick=()=>{
  house=player=0;houseEl.textContent=playerEl.textContent=0;log.innerHTML='';
  coin.style.transition='none';coin.style.transform='rotateY(0deg)';
};
</script>
</body>
</html>
